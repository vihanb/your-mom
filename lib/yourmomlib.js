"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var prompt=require("prompt-sync")();require("./utils.js");var jellycomp=require("./jellycomp.js");var NUMS="0123456789ABCDEFGHIJKLMN";var WHITESPACE=" \n\t\u000b\r\f";var CODEPAGE=Array.range(0,128).map(function(x){return String.fromCharCode(x)});CODEPAGE+="«»≠≤≥¥¬⊞⊟æ€ðÐ²³¼½¾çÇß§íÍþ®⍳";CODEPAGE+=Array.range(CODEPAGE.length,256).map(function(x){return String.fromCharCode(x)});var YourMom=function(){function YourMom(){var _this=this;_classCallCheck(this,YourMom);this.stack=[];this.backmemory=[];this.memory=[];this.map=new Map([["+",function(){_this.applydyadic(function(a,b){return a+b})}],["-",function(){_this.applydyadic(function(a,b){return a-b})}],["*",function(){_this.applydyadic(function(a,b){return a*b})}],["/",function(){_this.applydyadic(function(a,b){return a/b})}],["%",function(){_this.applydyadic(function(a,b){return a%b})}],["=",function(){_this.applydyadic(function(a,b){return+(a==b)})}],["≠",function(){_this.applydyadic(function(a,b){return+(a!=b)})}],["<",function(){_this.applydyadic(function(a,b){return+(a<b)})}],["≤",function(){_this.applydyadic(function(a,b){return+(a<=b)})}],[">",function(){_this.applydyadic(function(a,b){return+(a>b)})}],["≥",function(){_this.applydyadic(function(a,b){return+(a>=b)})}],["#",function(){_this.stack.push(0)}],["¥",function(){_this.stack.push(1)}],["¬",function(){_this.stack.push(_this.pop()^1)}],["~",function(){_this.stack.push(~_this.pop())}],["&",function(){_this.applydyadic(function(a,b){return a&b})}],["|",function(){_this.applydyadic(function(a,b){return a|b})}],["^",function(){_this.applydyadic(function(a,b){return a^b})}],["«",function(){_this.applydyadic(function(a,b){return a<<b})}],["»",function(){_this.applydyadic(function(a,b){return a>>b})}],["_",function(){console.log(_this.pop())}],["!",function(){var i=_this.pop();_this.memory[i]=_this.pop()}],["?",function(){_this.stack.push(_this.memory[_this.pop()])}],["'",function(tokens){var tok=void 0;var s="";while(tokens.length){tok=tokens.shift();if(tok=="'")break;s+=tok}_this.stack.push(s)}],["⊞",function(){_this.stack.push(_this.pop()+1)}],["⊟",function(){_this.stack.push(_this.pop()-1)}],[":",function(){var _=_this.pop();_this.stack.push(_);_this.stack.push(_)}],[";",function(){_this.pop()}],["æ",function(){var a=_this.pop();var b=_this.pop();_this.stack.push(a);_this.stack.push(b)}],["(",function(tokens){var tok=void 0;var s="";var sm=false;var l=0;while(tokens.length){tok=tokens.shift();if(tok=="'")sm=!sm;if(!sm){if(tok=="(")l++;else if(tok==")"){if(l)l--;else break}}s+=tok}_this.stack.push(function(){_this.run(s.split(""))})}],["€",function(tokens){var s=tokens.shift();_this.stack.push(function(){_this.run([s])})}],["$",function(){_this.pop()()}],["\\",function(){var _=_this.memory;_this.memory=_this.backmemory;_this.backmemory=_}],["@",function(){var _=_this.pop();while(_this.stack[_this.stack.length-1]){_()}}],["ð",function(){_this.stack.push(prompt())}],["Ð",function(){_this.stack.push(_this.readv())}],["²",function(){_this.stack.push(Math.pow(_this.pop(),2))}],["³",function(){_this.stack.push(Math.pow(_this.pop(),3))}],["¼",function(){_this.stack.push(_this.pop()/4)}],["½",function(){_this.stack.push(_this.pop()/2)}],["¾",function(){_this.stack.push(_this.pop()*0.75)}],[",",function(){_this.applydyadic(function(a,b){return a.concat([b])})}],[".",function(){_this.applydyadic(function(a,b){return a.concat(b)})}],["ç",function(){_this.stack.push([])}],["Ç",function(){var func=_this.pop();var arr=_this.pop();var _=arr.map(function(x){_this.stack.push(x);func();return _this.pop()});_this.stack.push(_)}],["ß",function(){var func=_this.pop();var arr=_this.pop();var _=arr.filter(function(x){_this.stack.push(x);func();return _this.pop()});_this.stack.push(_)}],["⍳",function(){var i=_this.pop();_this.stack.push(_this.stack[_this.stack.length-1][i])}],["§",function(){_this.stack.push(_this.pop()+"")}],["í",function(){_this.stack.push(parseInt(_this.pop()))}],["Í",function(){var s=_this.pop();var n=0;for(var c in s){n=n*24+NUMS.indexOf(c)}_this.stack.push(n)}],["þ",function(){_this.stack.push(parseFloat(_this.pop()))}],["®",function(){_this.applydyadic(function(a,b){return Array.range(a,b)})}],["`",function(){_this.stack.push(jellycomp.decompress([].concat(_toConsumableArray(new Buffer(_this.pop(),"base64")))))}]])}_createClass(YourMom,[{key:"pop",value:function pop(){if(this.stack.length)return this.stack.pop();return this.readv()}},{key:"readv",value:function readv(){var _=prompt();if(_.match(/^[-+]?\d+$/g)!=null)return parseInt(_);if(_.match(/^[-+]?\d+(\.\d*)?(e[-+]?\d+(\.\d+)?)?$/g)!=null)return parseFloat(_);return _}},{key:"run",value:function run(tokens){while(tokens.length){var tok=tokens.shift();if(NUMS.indexOf(tok)!=-1)this.stack.push(this.pop()*24+NUMS.indexOf(tok));else if(WHITESPACE.indexOf(tok)!=-1);else{var _=this.map.get(tok);if(Object.isUndef(_)){console.log("y u do dis ;_; y u do a syntax error ;_; '"+tok+"'");process.exit(1)}else _(tokens)}}}},{key:"applydyadic",value:function applydyadic(l){var a=this.pop(),b=this.pop();this.stack.push(l(b,a))}}]);return YourMom}();module.exports={YourMom:YourMom};